import{i as T,D as E,m as S,p as g,a as w,b as e,d as n,w as d,F,e as c,t as U,B as A,A as I,u as r,j as N,H as u,a3 as m,k as f,J as B,n as C,_ as K,o as x,E as h}from"./entry.9c0e72e9.js";import{l as O}from"./logo-black.82f51b60.js";import{_ as k}from"./StateButton.7f36f2aa.js";const D={class:"mx-auto w-full max-w-sm lg:w-96"},M=["src"],R=e("h2",{class:"mt-6 text-3xl font-bold tracking-tight text-gray-900"},"Sign in to your account",-1),j={class:"mt-2 text-sm text-gray-600"},L={class:"mt-8"},P={class:"mt-6"},$=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email address",-1),q={class:"mt-1"},H=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1),W={class:"mt-1"},J={class:"flex items-center justify-between"},z={class:"flex items-center"},G=e("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"Remember this device",-1),Q={class:"text-sm"},X={key:1,class:"space-y-6"},Y=e("h2",{class:"mt-6 text-3xl font-bold tracking-tight text-gray-900"},"Two-factor Authentication",-1),Z=e("p",{class:"my-4 text-base text-gray-600"},"Enter your authentication code provided on the authentication app on your mobile device.",-1),ee=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Two Factor Token",-1),te={class:"mt-1 flex space-x-2"},oe={class:"flex items-center"},se=e("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"Remember this device",-1),ie={__name:"login",setup(le){T({title:"Sign In"});let _=E();S();const p=g({submit:!1}),l=g([null,null,null,null,null,null]),b=g(!1),a=g({emailAddress:"",password:"",remember:!1});async function i(s){const t=s.target.nextElementSibling===null;if(s.code==="Backspace"){s.srcElement.value===""&&s.target.previousElementSibling.focus();return}if(s.srcElement.value.length!==0){if(s.srcElement.value>9){s.srcElement.value=null;return}t?await v():s.target.nextElementSibling.focus()}}function V(){l.value=[null,null,null,null,null,null]}async function v(){p.value.submit=!0;try{const s=l.value.join("");await B({method:"POST",url:"/v1/auth/login",withCredentials:!0,data:{emailAddress:a.value.emailAddress,password:a.value.password,totp:s.length>0?s:void 0}}),await _.updateUser(),await _.updateServers(),await C("/servers")}catch(s){s.message==="TWOFACTOR_INPUT"&&(b.value=!0),s.message==="INVALID_TWOFACTOR"&&V()}p.value.submit=!1}return(s,t)=>{const y=K;return x(),w("div",D,[e("div",null,[n(y,{to:"/"},{default:d(()=>[e("img",{class:"h-8 w-auto",src:r(O),alt:"Minefort.com"},null,8,M)]),_:1}),b.value?A("",!0):(x(),w(F,{key:0},[R,e("p",j,[c(" Or "+U(" ")+" "),n(y,{to:"/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:d(()=>[c("create a new account ")]),_:1})])],64))]),e("div",L,[e("div",P,[b.value?(x(),w("div",X,[e("div",null,[Y,Z,ee,e("div",te,[u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value[0]=o),type:"number",class:"flex-1 min-w-0 rounded-lg shadow-sm text-2xl py-4 border border-gray-300 text-center focus:outline-none focus:ring-indigo-500",placeholder:"0",onKeyup:i},null,544),[[m,l.value[0],void 0,{number:!0}]]),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.value[1]=o),type:"number",class:"flex-1 min-w-0 rounded-lg shadow-sm text-2xl py-4 border border-gray-300 text-center focus:outline-none focus:ring-indigo-500",placeholder:"0",onKeyup:i},null,544),[[m,l.value[1],void 0,{number:!0}]]),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.value[2]=o),type:"number",class:"flex-1 min-w-0 rounded-lg shadow-sm text-2xl py-4 border border-gray-300 text-center focus:outline-none focus:ring-indigo-500",placeholder:"0",onKeyup:i},null,544),[[m,l.value[2],void 0,{number:!0}]]),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.value[3]=o),type:"number",class:"flex-1 min-w-0 rounded-lg shadow-sm text-2xl py-4 border border-gray-300 text-center focus:outline-none focus:ring-indigo-500",placeholder:"0",onKeyup:i},null,544),[[m,l.value[3],void 0,{number:!0}]]),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.value[4]=o),type:"number",class:"flex-1 min-w-0 rounded-lg shadow-sm text-2xl py-4 border border-gray-300 text-center focus:outline-none focus:ring-indigo-500",placeholder:"0",onKeyup:i},null,544),[[m,l.value[4],void 0,{number:!0}]]),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.value[5]=o),type:"number",class:"flex-1 min-w-0 rounded-lg shadow-sm text-2xl py-4 border border-gray-300 text-center focus:outline-none focus:ring-indigo-500",placeholder:"0",onInput:i},null,544),[[m,l.value[5],void 0,{number:!0}]])])]),e("div",null,[e("div",oe,[n(r(f),{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),se])]),e("div",null,[n(k,{class:"w-full rounded-md bg-indigo-600 p-2 h-9 text-sm font-medium text-white hover:bg-indigo-700",loading:p.value.submit,onClick:t[10]||(t[10]=o=>v())},{default:d(()=>[c("Verify")]),_:1},8,["loading"])])])):(x(),I(r(N),{key:0,class:"space-y-6",onSubmit:t[3]||(t[3]=o=>v())},{default:d(()=>[e("div",null,[$,e("div",q,[n(r(f),{id:"email",modelValue:a.value.emailAddress,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.emailAddress=o),modelModifiers:{trim:!0},rules:"required|email",name:"email address",type:"email",autocomplete:"email",class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},null,8,["modelValue"]),n(r(h),{name:"email address",as:"p",class:"mt-1 text-sm text-red-600"})])]),e("div",null,[H,e("div",W,[n(r(f),{id:"password",modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.password=o),rules:"required",name:"password",type:"password",autocomplete:"password",class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},null,8,["modelValue"]),n(r(h),{name:"password",as:"p",class:"mt-1 text-sm text-red-600"})])]),e("div",J,[e("div",z,[n(r(f),{modelValue:a.value.remember,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.remember=o),id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,["modelValue"]),G]),e("div",Q,[n(y,{to:"/password-recovery",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:d(()=>[c("Forgot your password?")]),_:1})])]),e("div",null,[n(k,{class:"w-full rounded-md bg-indigo-600 p-2 h-9 text-sm font-medium text-white hover:bg-indigo-700",loading:p.value.submit},{default:d(()=>[c("Sign In")]),_:1},8,["loading"])])]),_:1}))])])])}}};export{ie as default};
