import{o as i,a as u,b as e,i as A,m as S,D as N,g as q,p,d as s,w as d,u as o,j as x,e as l,t as M,B as $,J as y,n as B,_ as C,k as f,a5 as R,E as g}from"./entry.9c0e72e9.js";import{l as T}from"./logo-black.82f51b60.js";import{_ as b}from"./StateButton.7f36f2aa.js";import{r as U}from"./InformationCircleIcon.6564d747.js";function k(P,_){return i(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 9l-3 3m0 0l3 3m-3-3h7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}const F={class:"mx-auto w-full max-w-sm lg:w-96"},j=["src"],D=e("h2",{class:"mt-6 text-3xl font-bold tracking-tight text-gray-900"},"Forgot password",-1),G=e("p",{class:"mt-2 text-sm text-gray-600"}," Please enter the email address you used when creating your Minefort.com account. ",-1),K={key:0,class:"mt-8"},O=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email address",-1),z={class:"mt-1"},H={class:"text-sm"},J={key:1,class:"mt-8"},L={class:"space-y-6"},Y={class:"pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-gray-200 shadow-lg ring-1 ring-black ring-opacity-5"},I={class:"p-3"},Q={class:"flex items-start"},W={class:"flex-shrink-0"},X={class:"ml-3 w-0 flex-1"},Z=e("p",{class:"text-sm font-medium text-gray-900"},"Please check your inbox.",-1),ee={class:"mt-1 text-sm text-gray-500"},se=e("div",null,[e("p",{class:"mt-2 text-sm text-gray-600"},[l(" To reset your password, follow the instructions in the email we've just sent you from "),e("strong",null,"noreply@minefort.com")])],-1),te={class:"text-sm"},oe={key:2,class:"mt-8"},ae=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"New password",-1),de={class:"mt-1"},le=e("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Re-enter new password",-1),re={class:"mt-1"},ce={__name:"password-recovery",setup(P){A({title:"Password Recovery"});const{$notify:_}=S();N();let h=q();const m=p(h.query.token!==void 0?2:0),r=p({sendEmail:!1,updatePassword:!1}),c=p({emailAddress:""}),n=p({password:"",confirmPassword:""});async function v(){r.value.sendEmail=!0;try{await y({method:"POST",url:"/v1/auth/reset",withCredentials:!0,data:{emailAddress:c.value.emailAddress}}),m.value=1}catch{}r.value.sendEmail=!1}async function V(){r.value.updatePassword=!0;try{await y({method:"POST",url:"/v1/auth/change-password",withCredentials:!0,data:{password:n.value.password,token:h.query.token}}),_({title:"Password updated",message:"Your password has been successfully updated.",type:"success"}),await B("/login")}catch{r.value.updatePassword=!1}}return(E,t)=>{const w=C;return i(),u("div",F,[e("div",null,[s(w,{to:"/"},{default:d(()=>[e("img",{class:"h-8 w-auto",src:o(T),alt:"Minefort.com"},null,8,j)]),_:1}),D,G]),m.value===0?(i(),u("div",K,[s(o(x),{onSubmit:t[2]||(t[2]=a=>v()),class:"space-y-6"},{default:d(()=>[e("div",null,[O,e("div",z,[s(o(f),{id:"email",modelValue:c.value.emailAddress,"onUpdate:modelValue":t[0]||(t[0]=a=>c.value.emailAddress=a),modelModifiers:{trim:!0},rules:"required|email",name:"email address",type:"email",autocomplete:"email",required:"",onKeyup:t[1]||(t[1]=R(a=>v(),["enter"])),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},null,8,["modelValue"]),s(o(g),{name:"email address",as:"p",class:"mt-1 text-sm text-red-600"})])]),e("div",null,[s(b,{class:"w-full rounded-md bg-indigo-600 p-2 h-9 text-sm font-medium text-white hover:bg-indigo-700",loading:r.value.sendEmail},{default:d(()=>[l("Send Reset Email")]),_:1},8,["loading"])]),e("div",H,[s(w,{to:"/login",class:"font-medium text-indigo-600 hover:text-indigo-500 inline-flex items-center"},{default:d(()=>[s(o(k),{class:"h-4 mr-1"}),l(" Go back to sign in ")]),_:1})])]),_:1})])):m.value===1?(i(),u("div",J,[e("div",L,[e("div",null,[e("div",Y,[e("div",I,[e("div",Q,[e("div",W,[s(o(U),{class:"h-5","aria-hidden":"true"})]),e("div",X,[Z,e("p",ee,[l("An email is on the way to "),e("strong",null,M(c.value.emailAddress),1),l(" with instructions for resetting your password.")])])])])])]),se,e("div",te,[s(w,{to:"/login",class:"font-medium text-indigo-600 hover:text-indigo-500 inline-flex items-center"},{default:d(()=>[s(o(k),{class:"h-4 mr-1"}),l(" Go back to sign in ")]),_:1})])])])):m.value===2?(i(),u("div",oe,[s(o(x),{onSubmit:t[5]||(t[5]=a=>V()),class:"space-y-6"},{default:d(()=>[e("div",null,[ae,e("div",de,[s(o(f),{modelValue:n.value.password,"onUpdate:modelValue":t[3]||(t[3]=a=>n.value.password=a),rules:"required",name:"new-password",id:"new-password",type:"password",class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},null,8,["modelValue"]),s(o(g),{name:"new-password",as:"p",class:"mt-1 text-sm text-red-600"})])]),e("div",null,[le,e("div",re,[s(o(f),{modelValue:n.value.confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=a=>n.value.confirmPassword=a),rules:"required|confirmed:@new-password",name:"confirm-password",id:"confirm-password",type:"password",class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},null,8,["modelValue"]),s(o(g),{name:"confirm-password",as:"p",class:"mt-1 text-sm text-red-600"})])]),e("div",null,[s(b,{class:"w-full rounded-md bg-indigo-600 p-2 h-9 text-sm font-medium text-white hover:bg-indigo-700",loading:r.value.updatePassword},{default:d(()=>[l("Update password")]),_:1},8,["loading"])])]),_:1})])):$("",!0)])}}};export{ce as default};
